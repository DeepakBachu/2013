From: Jeff Mahoney <jeffm@suse.com>
Subject: apparmor: ptrace_may_access -> ptrace_access_check
Patch-mainline: not yet, whenever AppArmor is upstream

 This patch adjusts to a security_operations API change in the 2.6.32 kernel.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 security/apparmor/lsm.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/security/apparmor/lsm.c
+++ b/security/apparmor/lsm.c
@@ -68,7 +68,7 @@ static void apparmor_cred_free(struct cr
 }
 
 
-static int apparmor_ptrace_may_access(struct task_struct *child,
+static int apparmor_ptrace_access_check(struct task_struct *child,
 				      unsigned int mode)
 {
 	return aa_ptrace(current, child, mode);
@@ -673,7 +673,7 @@ static int apparmor_socket_shutdown(stru
 static struct security_operations apparmor_ops = {
 	.name =				"apparmor",
 
-	.ptrace_may_access =		apparmor_ptrace_may_access,
+	.ptrace_access_check =		apparmor_ptrace_access_check,
 	.ptrace_traceme =		apparmor_ptrace_traceme,
 	.capget =			apparmor_capget,
 	.sysctl =			apparmor_sysctl,
