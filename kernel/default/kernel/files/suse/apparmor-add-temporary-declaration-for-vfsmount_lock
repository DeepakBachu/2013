From: Jeff Mahoney <jeffm@suse.com>
Subject: apparmor: add temporary declaration for vfsmount_lock
Patch-mainline: Never

 vfsmount_lock was moved to fs/internal.h in 2.6.34-rc1.

 Until d_namespace_path is cleaned up, we'll need to keep a reference to it.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
Acked-by: Jeff Mahoney <jeffm@suse.com>
---
 security/apparmor/path.c |    4 ++++
 1 file changed, 4 insertions(+)

--- a/security/apparmor/path.c
+++ b/security/apparmor/path.c
@@ -84,6 +84,10 @@ int aa_get_name(struct path *path, int i
 	return error;
 }
 
+/* Only needed until d_namespace_path is cleaned up and doesn't use
+ * vfsmount_lock anymore. -jeffm */
+extern spinlock_t vfsmount_lock;
+
 int d_namespace_path(struct path *path, char *buf, int buflen, char **name)
 {
 	struct path root, tmp, ns_root = { };
