From bdf1f472b461747d4cb9f32ae18bb2033e592970 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 17 Aug 2012 09:22:12 +0200
Subject: [PATCH] add back scsi_wait_scan

---
 modules.d/98systemd/dracut-initqueue.sh | 1 +
 modules.d/99base/init.sh                | 1 +
 2 files changed, 2 insertions(+)

diff --git a/modules.d/98systemd/dracut-initqueue.sh b/modules.d/98systemd/dracut-initqueue.sh
index e9da432..773e4cd 100755
--- a/modules.d/98systemd/dracut-initqueue.sh
+++ b/modules.d/98systemd/dracut-initqueue.sh
@@ -25,6 +25,7 @@ while :; do
     check_finished && break
 
     udevsettle
+    modprobe -q scsi_wait_scan && modprobe -q -r scsi_wait_scan
 
     check_finished && break
 
diff --git a/modules.d/99base/init.sh b/modules.d/99base/init.sh
index 16c8958..4c5a2f8 100755
--- a/modules.d/99base/init.sh
+++ b/modules.d/99base/init.sh
@@ -156,6 +156,7 @@ while :; do
     check_finished && break
 
     udevsettle
+    modprobe -q scsi_wait_scan && modprobe -q -r scsi_wait_scan
 
     check_finished && break
 
