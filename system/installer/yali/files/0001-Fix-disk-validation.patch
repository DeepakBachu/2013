From 84ebac01f7b93b1e72471a1a3a0c8f9f5863bb30 Mon Sep 17 00:00:00 2001
From: fatih <fatih@26e1f6f6-46e4-0310-a0b7-a8a415fd4c45>
Date: Wed, 20 Oct 2010 13:47:31 +0000
Subject: [PATCH 1/3] Fix disk validation

git-svn-id: https://svn.pardus.org.tr/uludag/trunk/yali@32613 26e1f6f6-46e4-0310-a0b7-a8a415fd4c45
---
 yali/pisiiface.py |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

diff --git a/yali/pisiiface.py b/yali/pisiiface.py
index e955535..6ab8670 100644
--- a/yali/pisiiface.py
+++ b/yali/pisiiface.py
@@ -270,12 +270,8 @@ def checkPackageHash(pkg_name):
     repo_path = os.path.dirname(ctx.consts.cd_repo_uri)
 
     pkg = pisi.db.packagedb.PackageDB().get_package(pkg_name)
-    file_name = pisi.util.package_name(pkg.name,
-                                       pkg.version,
-                                       pkg.release,
-                                       pkg.build)
     file_hash = pisi.util.sha1_file(
-        os.path.join(repo_path, file_name))
+        os.path.join(repo_path, pkg.packageURI))
 
     if not pkg.packageHash == file_hash:
         raise Exception
-- 
1.7.2.2

