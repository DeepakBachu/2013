From 6eca802b5a8c2bdee1611a781ad0549338b9a252 Mon Sep 17 00:00:00 2001
From: Mete Alpaslan <mete@pardus.org.tr>
Date: Mon, 23 Aug 2010 14:35:33 +0300
Subject: [PATCH 116/118] Small fix

Small fix.
---
 yali/gui/ScrPartitionAuto.py   |    4 +++-
 yali/gui/ScrPartitionManual.py |    4 ++--
 yali/gui/ScrSummary.py         |    3 +--
 3 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/yali/gui/ScrPartitionAuto.py b/yali/gui/ScrPartitionAuto.py
index 531be14..c49ad98 100644
--- a/yali/gui/ScrPartitionAuto.py
+++ b/yali/gui/ScrPartitionAuto.py
@@ -248,7 +248,7 @@ Pardus create a new partition for installation.</p>
         if self.storage.clearPartType is None or self.storage.clearPartType == CLEARPART_TYPE_LINUX:
             self.ui.replaceExistingLinux.toggle()
         elif self.storage.clearPartType == CLEARPART_TYPE_NONE:
-            self.ui.useFreeSpace.togg()
+            self.ui.useFreeSpace.toggle()
         elif self.storage.clearPartType == CLEARPART_TYPE_ALL:
             self.ui.useAllSpace.toggle()
 
@@ -319,6 +319,8 @@ Pardus create a new partition for installation.</p>
                 self.storage.doAutoPart = True
                 self.storage.autoPartitionRequests = defaultPartitioning(self.storage, quiet=0)
                 self.storage.clearPartDisks = self.clearPartDisks
+                if not self.storage.clearPartDisks:
+                    return False
 
                 if self.ui.review.isChecked():
                     increment = 1
diff --git a/yali/gui/ScrPartitionManual.py b/yali/gui/ScrPartitionManual.py
index afbcd08..531d7d2 100644
--- a/yali/gui/ScrPartitionManual.py
+++ b/yali/gui/ScrPartitionManual.py
@@ -65,7 +65,7 @@ about disk partitioning.
         self.connect(self.ui.editButton, SIGNAL("clicked()"),self.editDevice)
         self.connect(self.ui.deleteButton, SIGNAL("clicked()"),self.deleteDevice)
         self.connect(self.ui.resetButton, SIGNAL("clicked()"),self.reset)
-        self.connect(self.ui.deviceTree, SIGNAL("itemActivated(QTreeWidgetItem *, int)"), self.activateButtons)
+        self.connect(self.ui.deviceTree, SIGNAL("itemClicked(QTreeWidgetItem *, int)"), self.activateButtons)
 
     def shown(self):
         checkForSwapNoMatch(ctx.yali, self.storage)
@@ -91,7 +91,7 @@ about disk partitioning.
             ctx.mainScreen.disableNext()
 
     def activateButtons(self, item, index):
-        if item.device is not None and isinstance(item.device, Device):
+        if item and item.device is not None and isinstance(item.device, Device):
             self.ui.editButton.setEnabled(True)
             self.ui.deleteButton.setEnabled(True)
         else:
diff --git a/yali/gui/ScrSummary.py b/yali/gui/ScrSummary.py
index b0f7fa0..ebcce3d 100644
--- a/yali/gui/ScrSummary.py
+++ b/yali/gui/ScrSummary.py
@@ -142,9 +142,8 @@ Here you can see your install options before installation starts.
         content.append(subject % _("Partition Settings"))
         if ctx.storage.doAutoPart:
             summary = ""
-            clearPartDisks = ctx.storage.clearPartDisks
             devices = ""
-            for disk in clearPartDisks:
+            for disk in ctx.storage.clearPartDisks:
                 devices += "(%s on %s)" % (disk.model, disk.name)
 
             content.append(item % _("Automatic Partitioning selected."))
-- 
1.7.2.1

