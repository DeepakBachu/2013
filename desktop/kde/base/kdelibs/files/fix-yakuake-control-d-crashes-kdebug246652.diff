Index: kdelibs/kdeui/xmlgui/kxmlguifactory.cpp
===================================================================
--- kdelibs/kdeui/xmlgui/kxmlguifactory.cpp	(revision 1197479)
+++ kdelibs/kdeui/xmlgui/kxmlguifactory.cpp	(revision 1197480)
@@ -402,6 +402,11 @@
     refreshActionProperties();
 }
 
+void KXMLGUIFactory::forgetClient( KXMLGUIClient *client )
+{
+    d->m_clients.removeAll( client );
+}
+
 void KXMLGUIFactory::removeClient( KXMLGUIClient *client )
 {
     //kDebug(260) << client;
Index: kdelibs/kdeui/xmlgui/kxmlguifactory.h
===================================================================
--- kdelibs/kdeui/xmlgui/kxmlguifactory.h	(revision 1197479)
+++ kdelibs/kdeui/xmlgui/kxmlguifactory.h	(revision 1197480)
@@ -216,7 +216,11 @@
     void makingChanges(bool);
 
 private:
-  KXMLGUIFactoryPrivate *const d;
+    friend class KXMLGUIClient;
+    /// Internal, called by KXMLGUIClient destructor
+    void forgetClient(KXMLGUIClient *client);
+
+    KXMLGUIFactoryPrivate *const d;
 };
 
 #endif
Index: kdelibs/kdeui/xmlgui/kxmlguiclient.cpp
===================================================================
--- kdelibs/kdeui/xmlgui/kxmlguiclient.cpp	(revision 1197479)
+++ kdelibs/kdeui/xmlgui/kxmlguiclient.cpp	(revision 1197480)
@@ -97,10 +97,12 @@
   }
 
   if ( d->m_factory ) {
-    d->m_factory->removeClient ( this );
+    d->m_factory->forgetClient(this);
   }
- 
+
   foreach (KXMLGUIClient* client, d->m_children) {
+      if (d->m_factory)
+          d->m_factory->forgetClient(client);
       assert( client->d->m_parent == this );
       client->d->m_parent = 0;
   }
