commit 6e9dcec7904fabc213ae7e3b29e4b2209a989cc6
Author: Gökçen Eraslan <gokcen@pardus.org.tr>
Date:   Wed Aug 10 11:59:33 2011 +0000

    Fix loading/saving of VPN connections

diff --git a/backends/NetworkManager/settings/vpndbus.cpp b/backends/NetworkManager/settings/vpndbus.cpp
index ae2be68..c07327f 100644
--- a/backends/NetworkManager/settings/vpndbus.cpp
+++ b/backends/NetworkManager/settings/vpndbus.cpp
@@ -1,12 +1,14 @@
 // This file is generated by kconfig_compiler from vpn.kcfg.
 // All changes you do to this file will be lost.
 
-#include "vpndbus.h"
+#include <QDBusMetaType>
 
+#include "vpndbus.h"
 #include "vpn.h"
 
 VpnDbus::VpnDbus(Knm::VpnSetting * setting) : SettingDbus(setting)
 {
+    qDBusRegisterMetaType<QStringMap>();
 }
 
 VpnDbus::~VpnDbus()
@@ -20,14 +22,25 @@ void VpnDbus::fromMap(const QVariantMap & map)
     setting->setServiceType(map.value(QLatin1String(NM_SETTING_VPN_SERVICE_TYPE)).value<QString>());
   }
   if (map.contains(QLatin1String(NM_SETTING_VPN_DATA))) {
-    setting->setData(map.value(QLatin1String(NM_SETTING_VPN_DATA)).value<QStringMap>());
+    if (map.value(QLatin1String(NM_SETTING_VPN_DATA)).canConvert< QDBusArgument>()) {
+      QDBusArgument dataArg = map.value(QLatin1String(NM_SETTING_VPN_DATA)).value<QDBusArgument>();
+      setting->setData(qdbus_cast<QStringMap>(dataArg));
+    } else {
+      setting->setData(map.value(QLatin1String(NM_SETTING_VPN_DATA)).value<QStringMap>());
+    }
   }
   if (map.contains(QLatin1String(NM_SETTING_VPN_USER_NAME))) {
     setting->setUserName(map.value(QLatin1String(NM_SETTING_VPN_USER_NAME)).value<QString>());
   }
+
   // SECRET
   if (map.contains(QLatin1String(NM_SETTING_VPN_SECRETS))) {
-    setting->setVpnSecrets(map.value(QLatin1String(NM_SETTING_VPN_SECRETS)).value<QVariantMap>());
+    if (map.value(QLatin1String(NM_SETTING_VPN_SECRETS)).canConvert< QDBusArgument>()) {
+      QDBusArgument secretArg = map.value(QLatin1String(NM_SETTING_VPN_SECRETS)).value<QDBusArgument>();
+      setting->setVpnSecrets(qdbus_cast<QVariantMap>(secretArg));
+    } else {
+      setting->setVpnSecrets(map.value(QLatin1String(NM_SETTING_VPN_SECRETS)).value<QVariantMap>());
+    }
   }
 }
 
@@ -35,12 +48,16 @@ QVariantMap VpnDbus::toMap()
 {
   QVariantMap map;
   Knm::VpnSetting * setting = static_cast<Knm::VpnSetting *>(m_setting);
+
   map.insert(QLatin1String(NM_SETTING_VPN_SERVICE_TYPE), setting->serviceType());
   if (!setting->data().isEmpty())
       map.insert(QLatin1String(NM_SETTING_VPN_DATA), QVariant::fromValue(setting->data()));
-  map.insert(QLatin1String(NM_SETTING_VPN_SECRETS), QVariant::fromValue(QStringMap()));
+
+  map.insert(QLatin1String(NM_SETTING_VPN_SECRETS), QVariant::fromValue(setting->vpnSecrets()));
+
   if (!setting->userName().isEmpty())
       map.insert(QLatin1String(NM_SETTING_VPN_USER_NAME), setting->userName());
+
   return map;
 }
 

commit 011c599d806ba1c5e01c192b2eab4c7b7bbe148e
Author: Lamarque V. Souza <lamarque@gmail.com>
Date:   Sun Aug 7 12:13:07 2011 -0300

    Disabling this notification by default as some people have requested.
    (cherry picked from commit 18d5878241370b15c55bca07cec84706d9456bf3)

diff --git a/networkmanagement.notifyrc b/networkmanagement.notifyrc
index 56ddac7..df08c6f 100644
--- a/networkmanagement.notifyrc
+++ b/networkmanagement.notifyrc
@@ -908,5 +908,5 @@ Comment[tr]=Ağ yönetim altyapısı kapatıldı ya da yeniden başlatıldı
 Comment[uk]=Систему керування мережею було зупинено або перезапущено
 Comment[x-test]=xxThe network management subsystem was stopped or restartedxx
 Comment[zh_TW]=網路管理子系統已被關閉或重新啟動
-Action=Popup
+Action=
 
